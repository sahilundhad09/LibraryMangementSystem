@model LibraryManagementSystem.Models.Book
@{
    ViewData["Title"] = "Book Details";
}

<h1 class="text-info">Book Details</h1>

<div class="card bg-dark text-light border-light shadow-sm mb-4">
    <div class="card-body">
        <h4 class="card-title">@Model.Title</h4>
        <hr />
        <dl class="row">
            <dt class="col-sm-2">@Html.DisplayNameFor(model => model.Author)</dt>
            <dd class="col-sm-10">@Html.DisplayFor(model => model.Author)</dd>

            <dt class="col-sm-2">@Html.DisplayNameFor(model => model.ISBN)</dt>
            <dd class="col-sm-10">@Html.DisplayFor(model => model.ISBN)</dd>

            <dt class="col-sm-2">@Html.DisplayNameFor(model => model.Quantity)</dt>
            <dd class="col-sm-10">@Html.DisplayFor(model => model.Quantity)</dd>

            <dt class="col-sm-2">@Html.DisplayNameFor(model => model.IsAvailable)</dt>
            <dd class="col-sm-10">@Html.DisplayFor(model => model.IsAvailable)</dd>
        </dl>
    </div>
</div>

@if (Model.IsAvailable)

{
    <form asp-controller="Loans" asp-action="Borrow" method="post">
        <input type="hidden" name="bookId" value="@Model.Id" />
        <button type="submit" class="btn btn-outline-success">Borrow</button>
    </form>
}

else

{
    <p class="text-danger">This book is currently unavailable for borrowing.</p>
}

<div class="mt-4">
    @if (User.IsInRole("Admin"))

    {
        <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-outline-light">Edit</a>
        <span class="mx-2">|</span>
    }
    <a asp-action="Index" class="btn btn-outline-secondary">Back to List</a>
</div>

@if (TempData["ErrorMessage"] != null)

{
    <div class="alert alert-danger mt-3">
        @TempData["ErrorMessage"]
    </div>
}

@if (TempData["SuccessMessage"] != null)

{
    <div class="alert alert-success mt-3">
        @TempData["SuccessMessage"]
    </div>
}
